
15 Feb 2026
===========
General: 

The framework look very good, but details need extremely careful check. 

(0) python interface is good, but NEED a version running withno python. Alternative, using python to produce a
configuration file, defining everything and output this for ./main.x to run. Right now, the initialization is missing.
BEFORe doing python, a fully functioning fortran version must be running properly. Python is only for user friendly
use, not good for code development.

(1) computation of gradxy in (agent_move) gradient calculation seems to be ok, but agent_move_longevin it is arbitary!!!!!!!!!!!!!
(2) build_main.sh, YS has dones this, but the 
(3) path issue
    see mod_read_inputs.f95

(4) DO NOT USE the extension _old, which is confusing
(5) must creat a configuration without python for quick debugging. YS has done one version, but this must be standadized.

(6) create a output directory in paralell to input

(7) in main 
    ! Initial output - write agent state at time 0
    call write_agents_to_csv_hash("agents_output_0.csv", 0, world)
    export agents_output_0.csv to output

(8) in main
    here it is hardwired, try to specify the output path in configuration  
        ! ---------------------------------------------------------
        ! OUTPUT GENERATION
        ! ---------------------------------------------------------
        ! Write output at specified intervals
        if (mod(t, output_interval_visualization_data) == 0) then
            write(temp_string, '(I0)') t                  ! Convert timestep to string
            ! Create filename with timestep
            call write_agents_to_csv_hash("output/agents_plotting_data_" // &
                                         trim(temp_string) // ".csv", t, world)
            print *, "Time: ", t, " - Output written."
        end if

(9) in main 
Move this to a parameter control file:   ./src/main.f95:22:    integer :: output_interval_visualization_data = 1000  ! Default output interval

In main, remove the line command option, everything must be defined in the "parameter control" file.

./src/main.f95:48:            read(value_str, *) output_interval_visualization_data  ! Convert to integer
./src/main.f95:61:    print *, "Output Interval: ", output_interval_visualization_data
./src/main.f95:128:        if (mod(t, output_interval_visualization_data) == 0) then
Found 4 matches in ./src

NOTE: at the moment, the command input is not doing anything, test_arg, is not found anywhere, except read in.
Replace this section with reading from parameter control file.

MAYBE USE THIS for xxxx_config.nml  


    ! ============================================================
    ! COMMAND-LINE ARGUMENT PARSING
    ! ============================================================

    argc = command_argument_count()                       ! Get number of command-line arguments
    i = 1
    do while (i <= argc)
        call get_command_argument(i, arg)                 ! Get argument at position i

        ! Parse --output_interval argument
        if (trim(arg) == '--output_interval') then
            i = i + 1
            call get_command_argument(i, value_str)       ! Get the value string
            read(value_str, *) output_interval_visualization_data  ! Convert to integer
        ! Parse --test_arg argument
        else if (trim(arg) == '--test_arg') then
            i = i + 1
            call get_command_argument(i, value_str)
            read(value_str, *) test_arg                   ! Convert to real
        end if

        i = i + 1
    end do

    ! Display simulation parameters
    print *, "--- Simulation Parameters ---"
    print *, "Output Interval: ", output_interval_visualization_data
    print *, "test_arg:        ", test_arg
    print *, "---------------------------"

(10) module mod_setup makes a wrong impression, because it is only initial the agents position. 
     change its name to something more appropriate, maybe generate_agent, also subroutine, do not use _old, 
  
     I changed generate_initial_agents_old to initial_agents everywhere and added a debug option.

(11) What is the difference between agent_move_langevian and agent_move?
     I see at the moment, agent_move only has random motion, gradient is not included, water function has problems, no reflection is included
     I should work with Daniel on this
     (a) do a agent_motion module to replace agent_move and agent_move_longevin (delete agent_move_longevin) 
     (b) add to agent_move first diffusion, then decay, and then gradient, properly implement the boundary condition (check the hes_asian version)
     (c) make sure the python interface only has the agent_motion module
     (d) I now completed the agent_motion modules in mod_modules_hash.f95
     (e) mod_modules.f95 is no longer needed.

(12) At this stage of development, reduce flexibility, only when everything is tested, add flexibility. It must be realized that in a model a small error can 
     made the results completely wrong. 





